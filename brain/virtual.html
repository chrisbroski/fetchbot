<!doctype html>
<title>Fetchbot Virtual Environment</title>
<link rel="icon" type="image/png"  href="img/favicon.png">
<style>
* {box-sizing: border-box; }
h1, h3 {margin: 0.5em 0; font-weight: normal; }
h1 img {margin: 0 10px 0 0; vertical-align: middle; }
#environment {
    margin: 0 10px 10px 0;
    position: relative;
    overflow; auto;
    width: 400px; height: 300px;
    border: 1px solid #333;
    float: left;
    background: #fff;
}
#environment canvas {
    position: absolute;
    top: 0; right: 0; bottom: 0; left: 0;
}

#setting {
    position: absolute;
    left: 10px; top: 380px;
}

</style>

<article>
<h1><img src="img/favicon.png">Fetchbot Virtual Environment</h1>

<div id="environment">
    <canvas id="grid" width="400" height="300"></canvas>
    <canvas id="robot" width="400" height="300"></canvas>
    <canvas id="ball" width="400" height="300"></canvas>
</div>

<div id="setting">
<p><button onclick="ball()">Random Ball Location</button>
</div>

</article>

<script src="/socket.io/socket.io.js"></script>
<script>
var socket,
    canvasRobot,
    ctxRobot,
    canvasBall,
    ctxBall,
    viewWidth,
    mag,
    halfMag,
    width,
    ballPos,
    robotPos;

function ball() {
    ballPos = [Math.random(), Math.random()];
}

function grid() {
    var canvasGrid = document.getElementById('grid'),
        ctxGrid = canvasGrid.getContext("2d");

    ctxGrid.lineWidth = 1;
    ctxGrid.strokeStyle = 'rgb(250 , 250, 250)';
    ctxGrid.moveTo(49.5, 0);
    ctxGrid.lineTo(49.5, 300);
    ctxGrid.moveTo(199.5, 0);
    ctxGrid.lineTo(199.5, 300);
    ctxGrid.moveTo(349.5, 0);
    ctxGrid.lineTo(349.5, 300);
    ctxGrid.moveTo(0, 149.5);
    ctxGrid.lineTo(400, 149.5);
    ctxGrid.stroke();
}

function sendToObservers() {
    var senseData = [];
    socket.emit('sensor', JSON.stringify(senseData));
    window.setTimeout(sendToObservers, 250);
}

function init() {
    socket = io();

    grid();
    canvasRobot = document.getElementById('robot');
    ctxRobot = canvasRobot.getContext("2d");

    canvasBall = document.getElementById('ball');
    ctxBall = canvasBall.getContext("2d");
    ctxBall.fillStyle = 'rgba(255, 0, 255, 0.5)';

    //socket.on('senseState', senseStateReceived);

    //socket.emit('move', type);
}

init();

</script>
